schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/data_ingestion.py
    deps:
    - path: notebooks/data_processing.csv
      hash: md5
      md5: 076a29137d12e2efd136acfa2b7f4805
      size: 53591
    - path: params.yaml
      hash: md5
      md5: 7f2fbc276cc550c0b8c6e9146664162b
      size: 277
    - path: src/data/data_ingestion.py
      hash: md5
      md5: d420f593efb6350c287b5e1d8bd7c240
      size: 3889
    params:
      params.yaml:
        data_ingestion.test_size: 0.25
    outs:
    - path: datas/raw/test.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: datas/raw/train.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
  data_preprocessing:
    cmd: python src/data/data_preprocessing.py
    deps:
    - path: datas/raw/test.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: datas/raw/train.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
    - path: src/data/data_preprocessing.py
      hash: md5
      md5: 7b2b85a32d4e4383e61429be5a56baf2
      size: 1789
    outs:
    - path: datas/interim/test_processed.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: datas/interim/train_processed.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
  feature_engineering:
    cmd: python src/features/feature_engineering.py
    deps:
    - path: datas/interim/test_processed.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: datas/interim/train_processed.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
    - path: params.yaml
      hash: md5
      md5: 7f2fbc276cc550c0b8c6e9146664162b
      size: 277
    - path: src/features/feature_engineering.py
      hash: md5
      md5: e17934250904c8dea772a69715751af6
      size: 4214
    params:
      params.yaml:
        feature_engineering.max_features: 50
    outs:
    - path: datas/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: datas/processed/train_features.csv
      hash: md5
      md5: 147861ad99b74e72b753d98400d51294
      size: 149440
    - path: models/feature_scaler.pkl
      hash: md5
      md5: 9a5cc0ef87234df64fcb60f34398edb0
      size: 671
  model_training:
    cmd: python src/model/model_building.py
    deps:
    - path: config.yaml
      hash: md5
      md5: 1611fc7ef89c0fb703adbed7897cec06
      size: 155
    - path: datas/processed/train_features.csv
      hash: md5
      md5: 147861ad99b74e72b753d98400d51294
      size: 149440
    - path: mlflow_config.yaml
      hash: md5
      md5: 24c798a5d21772d3f3ab0de112c934af
      size: 916
    - path: src/model/mlflow_utils.py
      hash: md5
      md5: 13cbe8e667b403b009c3d7440a7ad3da
      size: 5370
    - path: src/model/model_building.py
      hash: md5
      md5: 1f58dbd48150d417a06303357a12ef01
      size: 11446
    params:
      params.yaml:
        activation: tanh
        batch_size: 32
        clipnorm: 1.0
        dropout: 0.3
        epochs: 50
        input_dim: 24
        l2: 0.001
        lr: 0.001
        patience: 10
        rnn_type: LSTM
        units: 64
    outs:
    - path: models/rnn_model.h5
      hash: md5
      md5: bf7500442ff0c5ebf5cc01204729e311
      size: 254912
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: datas/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: mlflow_config.yaml
      hash: md5
      md5: 24c798a5d21772d3f3ab0de112c934af
      size: 916
    - path: models/rnn_model.h5
      hash: md5
      md5: bf7500442ff0c5ebf5cc01204729e311
      size: 254912
    - path: src/model/mlflow_utils.py
      hash: md5
      md5: 13cbe8e667b403b009c3d7440a7ad3da
      size: 5370
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 11d081a904a129bce7f982d4816f92f5
      size: 9911
    outs:
    - path: reports/figures/
      hash: md5
      md5: c518122e87d81495e6f8c3ee0eaa4828.dir
      size: 92469
      nfiles: 4
    - path: reports/metrics.json
      hash: md5
      md5: c86ee97908d5bcb7f5b096517bddf7db
      size: 351
  model_prediction:
    cmd: python src/model/predict_model.py
    deps:
    - path: datas/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: models/rnn_model.h5
      hash: md5
      md5: bf7500442ff0c5ebf5cc01204729e311
      size: 254912
    - path: src/model/predict_model.py
      hash: md5
      md5: 84bfc77530913ab0282cbda8d5e75a5c
      size: 3876
    outs:
    - path: reports/predictions.csv
      hash: md5
      md5: 639f3d5e6a3c9d355cfbb730a10ddc60
      size: 3359
  model_registration:
    cmd: python src/model/register_model.py
    deps:
    - path: mlflow_config.yaml
      hash: md5
      md5: 24c798a5d21772d3f3ab0de112c934af
      size: 916
    - path: models/rnn_model.h5
      hash: md5
      md5: bf7500442ff0c5ebf5cc01204729e311
      size: 254912
    - path: reports/metrics.json
      hash: md5
      md5: c86ee97908d5bcb7f5b096517bddf7db
      size: 351
    - path: src/model/mlflow_utils.py
      hash: md5
      md5: 13cbe8e667b403b009c3d7440a7ad3da
      size: 5370
    - path: src/model/model_registry.py
      hash: md5
      md5: 049b475abae8bbc92bfd8e07238b6d3e
      size: 9150
    - path: src/model/register_model.py
      hash: md5
      md5: e5ec1a42796191edc08b21376c4e49c0
      size: 3165
    outs:
    - path: mlruns/
      hash: md5
      md5: ece6c56021d327437c160aa28cedb83d.dir
      size: 5095920
      nfiles: 285
    - path: reports/experiment_info.json
      hash: md5
      md5: 4e4347a83ba3299a6408b42e067d4d8b
      size: 1042
  data_visualization:
    cmd: python src/visualization/visualize.py
    deps:
    - path: datas/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: datas/processed/train_features.csv
      hash: md5
      md5: 147861ad99b74e72b753d98400d51294
      size: 149440
    - path: src/visualization/visualize.py
      hash: md5
      md5: 01468406c46aa6de20db19c02e1a8343
      size: 8339
    outs:
    - path: reports/figures/
      hash: md5
      md5: addf115265c85d8f4879f85beb7b52e9.dir
      size: 2607153
      nfiles: 7
  api_model_testing:
    cmd: python fast_api/load_model_test.py
    deps:
    - path: fast_api/load_model_test.py
      hash: md5
      md5: fe9ccfdc98b2542c77498d430c580049
      size: 2961
    - path: models/feature_scaler.pkl
      hash: md5
      md5: 9a5cc0ef87234df64fcb60f34398edb0
      size: 671
    - path: models/rnn_model.h5
      hash: md5
      md5: bf7500442ff0c5ebf5cc01204729e311
      size: 254912
    outs:
    - path: logs/api_test.log
      hash: md5
      md5: c7f21ff86aaeeb876d0c9f754963f957
      size: 1323
  documentation:
    cmd: cd docs && make.bat html
    deps:
    - path: docs/commands.rst
      hash: md5
      md5: 2b19c843d7bf827684d41a888eba66a6
      size: 499
    - path: docs/conf.py
      hash: md5
      md5: 2bc9e8545711353f353884de93a3113c
      size: 8129
    - path: docs/getting-started.rst
      hash: md5
      md5: dc418c0188d25a5f1a71b55e764df1b5
      size: 262
    - path: docs/index.rst
      hash: md5
      md5: 49668dad83e8830364b5884b8b419164
      size: 477
    outs:
    - path: docs/_build/html/
      hash: md5
      md5: b23587196623685ddff9bd0df36eafe2.dir
      size: 88102
      nfiles: 24
  model_production:
    cmd: python src/model/production_model_manager.py
    deps:
    - path: mlflow_config.yaml
      hash: md5
      md5: 24c798a5d21772d3f3ab0de112c934af
      size: 916
    - path: models/feature_scaler.pkl
      hash: md5
      md5: 9a5cc0ef87234df64fcb60f34398edb0
      size: 671
    - path: models/rnn_model.h5
      hash: md5
      md5: bf7500442ff0c5ebf5cc01204729e311
      size: 254912
    - path: reports/metrics.json
      hash: md5
      md5: c86ee97908d5bcb7f5b096517bddf7db
      size: 351
    - path: src/model/mlflow_utils.py
      hash: md5
      md5: 13cbe8e667b403b009c3d7440a7ad3da
      size: 5370
    - path: src/model/model_registry.py
      hash: md5
      md5: 049b475abae8bbc92bfd8e07238b6d3e
      size: 9150
    - path: src/model/production_model_manager.py
      hash: md5
      md5: a58534da557d754adcf6ca729de7ccc6
      size: 18101
    outs:
    - path: models/production_model.h5
      hash: md5
      md5: 728c36505f9c18b21868008037f7afbe
      size: 105448
