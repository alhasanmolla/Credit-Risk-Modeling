schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/data_ingestion.py
    deps:
    - path: notebooks/data_processing.csv
      hash: md5
      md5: 076a29137d12e2efd136acfa2b7f4805
      size: 53591
    - path: params.yaml
      hash: md5
      md5: 7f2fbc276cc550c0b8c6e9146664162b
      size: 277
    - path: src/data/data_ingestion.py
      hash: md5
      md5: 47eab3d30a6f83a6bb0db995df7cc491
      size: 3888
    params:
      params.yaml:
        data_ingestion.test_size: 0.25
    outs:
    - path: data/raw/test.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: data/raw/train.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
  data_preprocessing:
    cmd: python src/data/data_preprocessing.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: data/raw/train.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
    - path: src/data/data_preprocessing.py
      hash: md5
      md5: 792a2044937aac19da362586e3327535
      size: 1786
    outs:
    - path: data/interim/test_processed.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: data/interim/train_processed.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
  feature_engineering:
    cmd: python src/features/feature_engineering.py
    deps:
    - path: data/interim/test_processed.csv
      hash: md5
      md5: 9c8a9f64ea08612219290d58624e1c31
      size: 13553
    - path: data/interim/train_processed.csv
      hash: md5
      md5: 4bf60797641adbd2b7b4b8a125bc10e2
      size: 40128
    - path: params.yaml
      hash: md5
      md5: 7f2fbc276cc550c0b8c6e9146664162b
      size: 277
    - path: src/features/feature_engineering.py
      hash: md5
      md5: cd7657f2445678f00b6f9b930f9736cf
      size: 4209
    params:
      params.yaml:
        feature_engineering.max_features: 50
    outs:
    - path: data/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: data/processed/train_features.csv
      hash: md5
      md5: 147861ad99b74e72b753d98400d51294
      size: 149440
    - path: models/feature_scaler.pkl
      hash: md5
      md5: 9a5cc0ef87234df64fcb60f34398edb0
      size: 671
  model_training:
    cmd: python src/model/model_building.py
    deps:
    - path: config.yaml
      hash: md5
      md5: 1611fc7ef89c0fb703adbed7897cec06
      size: 155
    - path: data/processed/train_features.csv
      hash: md5
      md5: 147861ad99b74e72b753d98400d51294
      size: 149440
    - path: src/model/model_building.py
      hash: md5
      md5: 5e18f1ba4b13d55be5bfb9ab48a84ecf
      size: 6493
    params:
      params.yaml:
        activation: tanh
        batch_size: 32
        clipnorm: 1.0
        dropout: 0.3
        epochs: 50
        input_dim: 24
        l2: 0.001
        lr: 0.001
        patience: 10
        rnn_type: LSTM
        units: 64
    outs:
    - path: models/rnn_model.h5
      hash: md5
      md5: 9df3ec9dddce8fa4399ca389833dd107
      size: 111144
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: models/rnn_model.h5
      hash: md5
      md5: 9df3ec9dddce8fa4399ca389833dd107
      size: 111144
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 7b158995d97d08a02c3037e8228975b9
      size: 2939
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: d6c768f3e8f92152b3bbadd51b5e50ab
      size: 132
  model_prediction:
    cmd: python src/model/predict_model.py
    deps:
    - path: data/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: models/rnn_model.h5
      hash: md5
      md5: 9df3ec9dddce8fa4399ca389833dd107
      size: 111144
    - path: src/model/predict_model.py
      hash: md5
      md5: 595e56b298dd3a63ad1b717e155f1e07
      size: 3875
    outs:
    - path: reports/predictions.csv
      hash: md5
      md5: bf620469bf5e1fc5d86b457808845f0b
      size: 3374
  model_registration:
    cmd: python src/model/register_model.py
    deps:
    - path: models/rnn_model.h5
      hash: md5
      md5: 9df3ec9dddce8fa4399ca389833dd107
      size: 111144
    - path: reports/experiment_info.json
      hash: md5
      md5: 543f38673f32f341f4d8081237bd1543
      size: 323
    - path: reports/metrics.json
      hash: md5
      md5: d6c768f3e8f92152b3bbadd51b5e50ab
      size: 132
    - path: src/model/register_model.py
      hash: md5
      md5: e5ec1a42796191edc08b21376c4e49c0
      size: 3165
    outs:
    - path: mlruns/
      hash: md5
      md5: 59f9d8a553bed8543f1b78747776f7d3.dir
      size: 387
      nfiles: 2
  data_visualization:
    cmd: python src/visualization/visualize.py
    deps:
    - path: data/processed/test_features.csv
      hash: md5
      md5: 44e869121adbe913f4b199bff7b71ab5
      size: 50130
    - path: data/processed/train_features.csv
      hash: md5
      md5: 147861ad99b74e72b753d98400d51294
      size: 149440
    - path: src/visualization/visualize.py
      hash: md5
      md5: 18474badede2c337393d0e6f7dd18ccd
      size: 8337
    outs:
    - path: reports/figures/
      hash: md5
      md5: addf115265c85d8f4879f85beb7b52e9.dir
      size: 2607153
      nfiles: 7
  api_model_testing:
    cmd: python fast_api/load_model_test.py
    deps:
    - path: fast_api/load_model_test.py
      hash: md5
      md5: fe9ccfdc98b2542c77498d430c580049
      size: 2961
    - path: models/feature_scaler.pkl
      hash: md5
      md5: 9a5cc0ef87234df64fcb60f34398edb0
      size: 671
    - path: models/rnn_model.h5
      hash: md5
      md5: 9df3ec9dddce8fa4399ca389833dd107
      size: 111144
    outs:
    - path: logs/api_test.log
      hash: md5
      md5: 2437c8a50edebbab5480eb24f7966b7d
      size: 1323
  documentation:
    cmd: cd docs && make.bat html
    deps:
    - path: docs/commands.rst
      hash: md5
      md5: 2b19c843d7bf827684d41a888eba66a6
      size: 499
    - path: docs/conf.py
      hash: md5
      md5: 2bc9e8545711353f353884de93a3113c
      size: 8129
    - path: docs/getting-started.rst
      hash: md5
      md5: dc418c0188d25a5f1a71b55e764df1b5
      size: 262
    - path: docs/index.rst
      hash: md5
      md5: 49668dad83e8830364b5884b8b419164
      size: 477
    outs:
    - path: docs/_build/html/
      hash: md5
      md5: b23587196623685ddff9bd0df36eafe2.dir
      size: 88102
      nfiles: 24
